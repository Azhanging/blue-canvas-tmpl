{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 28032c77bd08d1f6cb95","webpack:///external {\"commonjs\":\"blue-utils\",\"commonjs2\":\"blue-utils\",\"root\":\"blueUtils\"}","webpack:///./src/canvas/index.js","webpack:///./src/render/index.js","webpack:///./src/index.js","webpack:///./src/instance/index.js","webpack:///./src/instance/init.js","webpack:///./src/canvas/canvas-properties.js","webpack:///./src/img/index.js","webpack:///external {\"commonjs\":\"blue-queue-pipe\",\"commonjs2\":\"blue-queue-pipe\",\"root\":\"BlueQueuePipe\"}","webpack:///./src/arc/index.js","webpack:///./src/text/index.js","webpack:///./src/device/index.js"],"names":["initCanvas","options","el","canvas","document","querySelector","canvasCtx","getContext","width","height","saveCanvasDefaultProperties","defaultCanvasProperties","utils","each","canvasProperties","key","render","renderList","forEach","item","type","renderImg","call","renderText","isFunction","hook","resetCanvasProperties","rendered","img","image","created","drawImage","x","y","text","font","fillStyle","style","fillText","content","BlueCanvasTmpl","opts","init","value","clearRect","arc","apply","arguments","getByteLength","loadQueue","id","console","warn","load","blueCanvasTmpl","BlueQueuePipe","methods","next","isEmpty","dequeue","loadImgs","findImgs","imgs","push","src","enqueue","Image","onload","parseInt","useMethod","onerror","log","radius","color","ctx","beginPath","lineWidth","moveTo","lineTo","arcTo","closePath","length","last","len","i","char","charAt","match","device","isWap","undefined","val","substr","lastVal","isWeChat","isIPhone","isIPad","isAndroid","isApp","isPc","isServer","userAgent","navigator","test","e"],"mappings":"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","file":"js/blue-canvas-tmpl.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"blue-utils\"), require(\"blue-queue-pipe\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([, ], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"BlueCanvasTmpl\"] = factory(require(\"blue-utils\"), require(\"blue-queue-pipe\"));\n\telse\n\t\troot[\"BlueCanvasTmpl\"] = factory(root[\"blueUtils\"], root[\"BlueQueuePipe\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_8__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./static\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 28032c77bd08d1f6cb95","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"blue-utils\",\"commonjs2\":\"blue-utils\",\"root\":\"blueUtils\"}\n// module id = 0\n// module chunks = 0 1","import utils from 'blue-utils';\r\nimport canvasProperties from './canvas-properties';\r\n\r\nexport function initCanvas() {\r\n  const options = this.options;\r\n  if (!options.el) return {};\r\n  const canvas = document.querySelector(options.el);\r\n  if (!canvas) return {};\r\n  const canvasCtx = canvas.getContext('2d');\r\n  canvas.width = options.width;\r\n  canvas.height = options.height;\r\n  return {\r\n    canvasCtx,\r\n    canvas\r\n  };\r\n}\r\n\r\n//save canvas default attributes\r\nexport function saveCanvasDefaultProperties() {\r\n  if (!this.canvas.defaultCanvasProperties) {\r\n    this.canvas.defaultCanvasProperties = {};\r\n    utils.each(canvasProperties, (key) => {\r\n      this.canvas.defaultCanvasProperties[key] = this.canvasCtx[key];\r\n    });\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/canvas/index.js","import utils from 'blue-utils';\r\n\r\n//渲染\r\nexport default function render() {\r\n  const options = this.options;\r\n  const renderList = options.renderList;\r\n  (renderList || []).forEach((item) => {\r\n    if (item.type === 'img') {\r\n      renderImg.call(this, item);\r\n    } else if (item.type === 'text') {\r\n      renderText.call(this, item);\r\n    } else if (utils.isFunction(item)) {\r\n      utils.hook(this, item);\r\n    }\r\n    this.resetCanvasProperties();\r\n  });\r\n  utils.hook(this, options.rendered);\r\n}\r\n\r\n//渲染图片\r\nfunction renderImg(img) {\r\n  //插入图片\r\n  if (img.image) {\r\n    utils.hook(this, img.created, [img]);\r\n    this.canvasCtx.drawImage(img.image, img.x, img.y, img.width, img.height);\r\n    utils.hook(this, img.rendered, [img]);\r\n  }\r\n}\r\n\r\n//渲染文字\r\nexport function renderText(text) {\r\n  utils.hook(this, text.created, [text]);\r\n  const canvasCtx = this.canvasCtx;\r\n  canvasCtx.font = text.font || '15px arial, 微软雅黑, sans-serif';\r\n  canvasCtx.fillStyle = text.style || '#000';\r\n  canvasCtx.fillText(text.content, text.x, text.y);\r\n  utils.hook(this, text.rendered, [text]);\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/index.js","import BlueCanvasTmpl from './instance';\r\n\r\nexport default BlueCanvasTmpl;\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import init from './init';\r\nimport { renderText } from '../render';\r\nimport { arc } from '../arc';\r\nimport { getByteLength } from '../text';\r\nimport utils from 'blue-utils';\r\n\r\nclass BlueCanvasTmpl {\r\n  constructor(opts = {\r\n    //创建后的钩子\r\n    created() {\r\n    },\r\n    renderList: [],\r\n    //渲染完毕后的钩子\r\n    rendered() {\r\n    }\r\n  }) {\r\n    this.options = opts;\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    init.call(this);\r\n  }\r\n\r\n  renderText(text) {\r\n    renderText.call(this, text);\r\n  }\r\n\r\n  //初始化canvas context的属性\r\n  resetCanvasProperties() {\r\n    utils.each(this.canvas.defaultCanvasProperties, (value, key) => {\r\n      this.canvasCtx[key] = value;\r\n    });\r\n  }\r\n\r\n  //更新\r\n  update(options) {\r\n    if (options) {\r\n      this.options = options;\r\n    }\r\n    this.canvasCtx.clearRect(0, 0, this.options.width, this.options.height);\r\n    this.init();\r\n  }\r\n\r\n  arc() {\r\n    arc.apply(this, arguments);\r\n  }\r\n\r\n  getByteLength() {\r\n    return getByteLength.apply(this, arguments);\r\n  }\r\n\r\n  static getByteLength() {\r\n    return getByteLength.apply(this, arguments);\r\n  }\r\n\r\n}\r\n\r\nexport default BlueCanvasTmpl;\n\n\n// WEBPACK FOOTER //\n// ./src/instance/index.js","import { initCanvas } from \"../canvas\";\r\nimport utils from 'blue-utils';\r\nimport { load } from '../img';\r\nimport { saveCanvasDefaultProperties } from '../canvas';\r\n\r\nfunction init() {\r\n  //预加载队列\r\n  this.loadQueue = [];\r\n  this.id = 0;\r\n  const { canvas, canvasCtx } = initCanvas.call(this);\r\n  if (!canvas) {\r\n    console.warn(`element is null`);\r\n    return;\r\n  }\r\n  this.canvasCtx = canvasCtx;\r\n  this.canvas = canvas;\r\n  saveCanvasDefaultProperties.call(this);\r\n  //创建完毕的钩子\r\n  utils.hook(this, this.options.created);\r\n  //预加载\r\n  load.call(this);\r\n}\r\n\r\nexport default init;\n\n\n// WEBPACK FOOTER //\n// ./src/instance/init.js","//default canvas config\r\nconst canvasProperties = [\r\n  \"fillStyle\",\r\n  \"filter\",\r\n  \"font\",\r\n  \"globalAlpha\",\r\n  \"globalCompositeOperation\",\r\n  \"imageSmoothingEnabled\",\r\n  \"imageSmoothingQuality\",\r\n  \"lineCap\",\r\n  \"lineDashOffset\",\r\n  \"lineJoin\",\r\n  \"lineWidth\",\r\n  \"miterLimit\",\r\n  \"shadowBlur\",\r\n  \"shadowColor\",\r\n  \"shadowOffsetX\",\r\n  \"shadowOffsetY\",\r\n  \"strokeStyle\",\r\n  \"textAlign\",\r\n  \"textBaseline\"\r\n];\r\n\r\nexport default canvasProperties;\n\n\n// WEBPACK FOOTER //\n// ./src/canvas/canvas-properties.js","import utils from 'blue-utils';\r\nimport BlueQueuePipe from 'blue-queue-pipe';\r\nimport render from '../render';\r\n\r\n//预加载\r\nexport function load() {\r\n  const blueCanvasTmpl = this;\r\n  this.id++;\r\n  //设置预加载的队列\r\n  this.loadQueue = new BlueQueuePipe({\r\n    methods: {\r\n      next() {\r\n        if (!this.isEmpty()) {\r\n          utils.hook(this, this.dequeue());\r\n        } else {\r\n          //没有就进行渲染\r\n          render.call(blueCanvasTmpl);\r\n        }\r\n      }\r\n    }\r\n  });\r\n  //查找渲染中为图片，预加载图片\r\n  loadImgs.call(this, findImgs.call(this));\r\n}\r\n\r\n//查找图片\r\nfunction findImgs() {\r\n  const { renderList } = this.options;\r\n  const imgs = [];\r\n  utils.each(renderList, (item) => {\r\n    if (item.type === 'img') {\r\n      imgs.push(item);\r\n    }\r\n  });\r\n  return imgs;\r\n}\r\n\r\n//预加载图片\r\nfunction loadImgs(imgs) {\r\n  const id = this.id;\r\n  (imgs || []).forEach((img) => {\r\n    if (!img.src) return;\r\n    this.loadQueue.enqueue(() => {\r\n      const image = new Image();\r\n      image.id = this.id;\r\n      image.onload = () => {\r\n        //限定执行的id\r\n        if (parseInt(image.id) === id) {\r\n          img.image = image;\r\n          //队列下一跳\r\n          this.loadQueue.useMethod('next');\r\n        }\r\n      };\r\n\r\n      image.onerror = () => {\r\n        //队列下一跳\r\n        console.log(`load error:${image.src}`);\r\n        this.loadQueue.useMethod('next');\r\n      };\r\n\r\n      image.src = img.src;\r\n\r\n    });\r\n  });\r\n  this.loadQueue.useMethod('next');\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/img/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"blue-queue-pipe\",\"commonjs2\":\"blue-queue-pipe\",\"root\":\"BlueQueuePipe\"}\n// module id = 8\n// module chunks = 0 1","export function arc(type, x, y, width, height, radius, color) {\r\n  const ctx = this.canvasCtx;\r\n  ctx.beginPath();\r\n  ctx.lineWidth = 1;\r\n  ctx[type + 'Style'] = color;\r\n  ctx.moveTo(x, y);\r\n  ctx.lineTo(x + width, y);\r\n  ctx.arcTo(x + width + radius, y, x + width + radius, y + radius, radius);\r\n  ctx.lineTo(x + width + radius, y + height);\r\n  ctx.arcTo(x + width + radius, y + height + radius, x + width, y + radius + height, radius);\r\n  ctx.lineTo(x, y + height + radius);\r\n  ctx.arcTo(x - radius, y + height + radius, x - radius, y + height, radius);\r\n  ctx.lineTo(x - radius, y + radius);\r\n  ctx.arcTo(x - radius, y, x, y, radius);\r\n  ctx.closePath();\r\n  ctx[type]();\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/arc/index.js","import device from '../device';\r\n\r\nexport function getByteLength(content, length, last) {\r\n  let len = 0;\r\n  for (let i = 0; i < content.length; i++) {\r\n    let char = content.charAt(i);\r\n    if (\r\n      char.match(/[\\u4E00-\\u9FBF]/ig) != null ||\r\n      char.match(/[\\u2014\\u300a\\u300b]/g) ||\r\n      (char.match(/[\\uff0c\\u3002\\u201c\\uff1a\\u201d\\u2014]/ig) != null && !device.isWap) ||\r\n      (char.match(/[\\uff0c\\u3002\\uff1a]/ig) != null && device.isWap)\r\n    ) {\r\n      len += 2;\r\n    } else {\r\n      len += 1;\r\n    }\r\n    //满足截取的字符长度\r\n    //截取的字符等于已经抓到的len，\r\n    if (length !== undefined && (length === len || length < len)) {\r\n      return {\r\n        val: content.substr(0, i + 1),\r\n        lastVal: content.substr(i + 1)\r\n      };\r\n    }\r\n  }\r\n  if (length !== undefined && last === true) {\r\n    return {\r\n      val: content.substr(0),\r\n      lastVal: ''\r\n    };\r\n  }\r\n  return len;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/text/index.js","//获取当前设备信息\r\nexport default function device() {\r\n  //默认\r\n  let device = {\r\n    isWeChat: false,  //是否在微信端\r\n    isWap: false,     //是否为移动设备\r\n    isIPhone: false,\r\n    isIPad: false,\r\n    isAndroid: false,\r\n    isApp: false,     //是否在app webview\r\n    isPc: false,      //是否为电脑端\r\n    isServer: true    //是否在服务器端 预留ssr处理\r\n  };\r\n\r\n  try {\r\n    const userAgent = navigator.userAgent;\r\n    const isWap = /iPhone|iPad|Android|Windows Phone|KFAPWI|MeeGo/ig.test(userAgent);\r\n    const isWeChat = /MicroMessenger/ig.test(userAgent);\r\n    device = {\r\n      isWeChat,\r\n      isWap,\r\n      isIPhone: /iPhone/ig.test(userAgent),\r\n      isIPad: /iPad/ig.test(userAgent),\r\n      isAndroid: /Android/ig.test(userAgent),\r\n      isApp: false,\r\n      isPc: !isWap,\r\n      isServer: false\r\n    };\r\n  } catch (e) {\r\n\r\n  }\r\n\r\n  return device;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/device/index.js"],"sourceRoot":""}