{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 928e89e3ab0b91b9a530","webpack:///external {\"commonjs\":\"blue-utils\",\"commonjs2\":\"blue-utils\",\"root\":\"blueUtils\"}","webpack:///./src/canvas/index.js","webpack:///./src/render/index.js","webpack:///./src/index.js","webpack:///./src/instance/index.js","webpack:///./src/instance/init.js","webpack:///./src/canvas/canvas-properties.js","webpack:///./src/img/index.js","webpack:///external {\"commonjs\":\"blue-queue-pipe\",\"commonjs2\":\"blue-queue-pipe\",\"root\":\"BlueQueuePipe\"}","webpack:///./src/arc/index.js","webpack:///./src/text/index.js","webpack:///./src/device/index.js"],"names":["initCanvas","options","el","canvas","document","querySelector","canvasCtx","getContext","width","height","saveCanvasDefaultProperties","defaultCanvasProperties","utils","each","canvasProperties","key","render","renderList","forEach","item","type","renderImg","call","renderText","isFunction","hook","resetCanvasProperties","img","image","created","drawImage","x","y","rendered","text","font","fillStyle","style","fillText","content","BlueCanvasTmpl","constructor","opts","init","value","update","clearRect","arc","apply","arguments","getByteLength","loadQueue","id","console","warn","load","blueCanvasTmpl","BlueQueuePipe","methods","next","isEmpty","dequeue","log","loadImgs","findImgs","imgs","push","src","enqueue","Image","onload","parseInt","useMethod","onerror","radius","color","ctx","beginPath","lineWidth","moveTo","lineTo","arcTo","closePath","length","last","len","i","char","charAt","match","device","isWap","undefined","val","substr","lastVal","isWeChat","isIPhone","isIPad","isAndroid","isApp","isPc","isServer","userAgent","navigator","test","e"],"mappings":"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","file":"js/blue-canvas-tmpl.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"blue-utils\"), require(\"blue-queue-pipe\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([, ], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"BlueCanvasTmpl\"] = factory(require(\"blue-utils\"), require(\"blue-queue-pipe\"));\n\telse\n\t\troot[\"BlueCanvasTmpl\"] = factory(root[\"blueUtils\"], root[\"BlueQueuePipe\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_8__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./static\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 928e89e3ab0b91b9a530","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"blue-utils\",\"commonjs2\":\"blue-utils\",\"root\":\"blueUtils\"}\n// module id = 0\n// module chunks = 0 1","import utils from 'blue-utils';\r\nimport canvasProperties from './canvas-properties';\r\n\r\nexport function initCanvas() {\r\n  const options = this.options;\r\n  if (!options.el) return {};\r\n  const canvas = document.querySelector(options.el);\r\n  if (!canvas) return {};\r\n  const canvasCtx = canvas.getContext('2d');\r\n  canvas.width = options.width;\r\n  canvas.height = options.height;\r\n  return {\r\n    canvasCtx,\r\n    canvas\r\n  };\r\n}\r\n\r\n//save canvas default attributes\r\nexport function saveCanvasDefaultProperties() {\r\n  if (!this.canvas.defaultCanvasProperties) {\r\n    this.canvas.defaultCanvasProperties = {};\r\n    utils.each(canvasProperties, (key) => {\r\n      this.canvas.defaultCanvasProperties[key] = this.canvasCtx[key];\r\n    });\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/canvas/index.js","import utils from 'blue-utils';\r\n\r\n//渲染\r\nexport default function render() {\r\n  const renderList = this.options.renderList;\r\n  (renderList || []).forEach((item) => {\r\n    if (item.type === 'img') {\r\n      renderImg.call(this, item);\r\n    } else if (item.type === 'text') {\r\n      renderText.call(this, item);\r\n    } else if (utils.isFunction(item)) {\r\n      utils.hook(this, item);\r\n    }\r\n    this.resetCanvasProperties();\r\n  });\r\n}\r\n\r\n//渲染图片\r\nfunction renderImg(img) {\r\n  //插入图片\r\n  if (img.image) {\r\n    utils.hook(this, img.created, [img]);\r\n    this.canvasCtx.drawImage(img.image, img.x, img.y, img.width, img.height);\r\n    utils.hook(this, img.rendered, [img]);\r\n  }\r\n}\r\n\r\n//渲染文字\r\nexport function renderText(text) {\r\n  utils.hook(this, text.created, [text]);\r\n  const canvasCtx = this.canvasCtx;\r\n  canvasCtx.font = text.font || '15px arial, 微软雅黑, sans-serif';\r\n  canvasCtx.fillStyle = text.style || '#000';\r\n  canvasCtx.fillText(text.content, text.x, text.y);\r\n  utils.hook(this, text.rendered, [text]);\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/index.js","import BlueCanvasTmpl from './instance';\r\n\r\nexport default BlueCanvasTmpl;\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import init from './init';\r\nimport { renderText } from '../render';\r\nimport { arc } from '../arc';\r\nimport { getByteLength } from '../text';\r\nimport utils from 'blue-utils';\r\n\r\nclass BlueCanvasTmpl {\r\n  constructor(opts = {\r\n    //创建后的钩子\r\n    created() {\r\n    },\r\n    renderList: [],\r\n    //渲染完毕后的钩子\r\n    rendered() {\r\n    }\r\n  }) {\r\n    this.options = opts;\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    init.call(this);\r\n  }\r\n\r\n  renderText(text) {\r\n    renderText.call(this, text);\r\n  }\r\n\r\n  //初始化canvas context的属性\r\n  resetCanvasProperties() {\r\n    utils.each(this.canvas.defaultCanvasProperties, (value, key) => {\r\n      this.canvasCtx[key] = value;\r\n    });\r\n  }\r\n\r\n  //更新\r\n  update(options) {\r\n    if (options) {\r\n      this.options = options;\r\n    }\r\n    this.canvasCtx.clearRect(0, 0, this.options.width, this.options.height);\r\n    this.init();\r\n  }\r\n\r\n  arc() {\r\n    arc.apply(this, arguments);\r\n  }\r\n\r\n  getByteLength() {\r\n    return getByteLength.apply(this, arguments);\r\n  }\r\n\r\n  static getByteLength() {\r\n    return getByteLength.apply(this, arguments);\r\n  }\r\n\r\n}\r\n\r\nexport default BlueCanvasTmpl;\n\n\n// WEBPACK FOOTER //\n// ./src/instance/index.js","import { initCanvas } from \"../canvas\";\r\nimport utils from 'blue-utils';\r\nimport { load } from '../img';\r\nimport { saveCanvasDefaultProperties } from '../canvas';\r\n\r\nfunction init(opts) {\r\n  //预加载队列\r\n  this.loadQueue = [];\r\n  this.id = 0;\r\n  const { canvas, canvasCtx } = initCanvas.call(this);\r\n  if (!canvas) {\r\n    console.warn(`element is null`);\r\n    return;\r\n  }\r\n  this.canvasCtx = canvasCtx;\r\n  this.canvas = canvas;\r\n  saveCanvasDefaultProperties.call(this);\r\n  //创建完毕的钩子\r\n  utils.hook(this, this.options.created);\r\n  //预加载\r\n  load.call(this);\r\n}\r\n\r\nexport default init;\n\n\n// WEBPACK FOOTER //\n// ./src/instance/init.js","//default canvas config\r\nconst canvasProperties = [\r\n  \"fillStyle\",\r\n  \"filter\",\r\n  \"font\",\r\n  \"globalAlpha\",\r\n  \"globalCompositeOperation\",\r\n  \"imageSmoothingEnabled\",\r\n  \"imageSmoothingQuality\",\r\n  \"lineCap\",\r\n  \"lineDashOffset\",\r\n  \"lineJoin\",\r\n  \"lineWidth\",\r\n  \"miterLimit\",\r\n  \"shadowBlur\",\r\n  \"shadowColor\",\r\n  \"shadowOffsetX\",\r\n  \"shadowOffsetY\",\r\n  \"strokeStyle\",\r\n  \"textAlign\",\r\n  \"textBaseline\"\r\n];\r\n\r\nexport default canvasProperties;\n\n\n// WEBPACK FOOTER //\n// ./src/canvas/canvas-properties.js","import utils from 'blue-utils';\r\nimport BlueQueuePipe from 'blue-queue-pipe';\r\nimport render from '../render';\r\n\r\n//预加载\r\nexport function load() {\r\n  const blueCanvasTmpl = this;\r\n  this.id++;\r\n  //设置预加载的队列\r\n  this.loadQueue = new BlueQueuePipe({\r\n    methods: {\r\n      next() {\r\n        if (!this.isEmpty()) {\r\n          utils.hook(this, this.dequeue());\r\n        } else {\r\n          console.log('render');\r\n          //没有就进行渲染\r\n          render.call(blueCanvasTmpl);\r\n        }\r\n      }\r\n    }\r\n  });\r\n  //查找渲染中为图片，预加载图片\r\n  loadImgs.call(this, findImgs.call(this));\r\n}\r\n\r\n//查找图片\r\nfunction findImgs() {\r\n  const { renderList } = this.options;\r\n  const imgs = [];\r\n  utils.each(renderList, (item) => {\r\n    if (item.type === 'img') {\r\n      imgs.push(item);\r\n    }\r\n  });\r\n  return imgs;\r\n}\r\n\r\n//预加载图片\r\nfunction loadImgs(imgs) {\r\n  const id = this.id;\r\n  (imgs || []).forEach((img) => {\r\n    if (!img.src) return;\r\n    this.loadQueue.enqueue(() => {\r\n      const image = new Image();\r\n      image.id = this.id;\r\n      image.onload = () => {\r\n        //限定执行的id\r\n        if (parseInt(image.id) === id) {\r\n          img.image = image;\r\n          //队列下一跳\r\n          console.log('success');\r\n          this.loadQueue.useMethod('next');\r\n        }\r\n      };\r\n\r\n      image.onerror = () => {\r\n        //队列下一跳\r\n        console.log('error');\r\n        this.loadQueue.useMethod('next');\r\n      };\r\n\r\n      image.src = img.src;\r\n\r\n    });\r\n  });\r\n  console.log('next');\r\n  this.loadQueue.useMethod('next');\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/img/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"blue-queue-pipe\",\"commonjs2\":\"blue-queue-pipe\",\"root\":\"BlueQueuePipe\"}\n// module id = 8\n// module chunks = 0 1","export function arc(type, x, y, width, height, radius, color) {\r\n  const ctx = this.canvasCtx;\r\n  ctx.beginPath();\r\n  ctx.lineWidth = 1;\r\n  ctx[type + 'Style'] = color;\r\n  ctx.moveTo(x, y);\r\n  ctx.lineTo(x + width, y);\r\n  ctx.arcTo(x + width + radius, y, x + width + radius, y + radius, radius);\r\n  ctx.lineTo(x + width + radius, y + height);\r\n  ctx.arcTo(x + width + radius, y + height + radius, x + width, y + radius + height, radius);\r\n  ctx.lineTo(x, y + height + radius);\r\n  ctx.arcTo(x - radius, y + height + radius, x - radius, y + height, radius);\r\n  ctx.lineTo(x - radius, y + radius);\r\n  ctx.arcTo(x - radius, y, x, y, radius);\r\n  ctx.closePath();\r\n  ctx[type]();\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/arc/index.js","import device from '../device';\r\n\r\nexport function getByteLength(content, length, last) {\r\n  let len = 0;\r\n  for (let i = 0; i < content.length; i++) {\r\n    let char = content.charAt(i);\r\n    if (\r\n      char.match(/[\\u4E00-\\u9FBF]/ig) != null ||\r\n      char.match(/[\\u2014\\u300a\\u300b]/g) ||\r\n      (char.match(/[\\uff0c\\u3002\\u201c\\uff1a\\u201d\\u2014]/ig) != null && !device.isWap) ||\r\n      (char.match(/[\\uff0c\\u3002\\uff1a]/ig) != null && device.isWap)\r\n    ) {\r\n      len += 2;\r\n    } else {\r\n      len += 1;\r\n    }\r\n    //满足截取的字符长度\r\n    //截取的字符等于已经抓到的len，\r\n    if (length !== undefined && (length === len || length < len)) {\r\n      return {\r\n        val: content.substr(0, i + 1),\r\n        lastVal: content.substr(i + 1)\r\n      };\r\n    }\r\n  }\r\n  if (length !== undefined && last === true) {\r\n    return {\r\n      val: content.substr(0),\r\n      lastVal: ''\r\n    };\r\n  }\r\n  return len;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/text/index.js","//获取当前设备信息\r\nexport default function device() {\r\n  //默认\r\n  let device = {\r\n    isWeChat: false,  //是否在微信端\r\n    isWap: false,     //是否为移动设备\r\n    isIPhone: false,\r\n    isIPad: false,\r\n    isAndroid: false,\r\n    isApp: false,     //是否在app webview\r\n    isPc: false,      //是否为电脑端\r\n    isServer: true    //是否在服务器端 预留ssr处理\r\n  };\r\n\r\n  try {\r\n    const userAgent = navigator.userAgent;\r\n    const isWap = /iPhone|iPad|Android|Windows Phone|KFAPWI|MeeGo/ig.test(userAgent);\r\n    const isWeChat = /MicroMessenger/ig.test(userAgent);\r\n    device = {\r\n      isWeChat,\r\n      isWap,\r\n      isIPhone: /iPhone/ig.test(userAgent),\r\n      isIPad: /iPad/ig.test(userAgent),\r\n      isAndroid: /Android/ig.test(userAgent),\r\n      isApp: false,\r\n      isPc: !isWap,\r\n      isServer: false\r\n    };\r\n  } catch (e) {\r\n\r\n  }\r\n\r\n  return device;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/device/index.js"],"sourceRoot":""}