{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 28032c77bd08d1f6cb95","webpack:///external {\"commonjs\":\"blue-utils\",\"commonjs2\":\"blue-utils\",\"root\":\"blueUtils\"}","webpack:///./src/canvas/index.js","webpack:///./src/render/index.js","webpack:///./src/index.js","webpack:///./src/instance/index.js","webpack:///./src/instance/init.js","webpack:///./src/canvas/canvas-properties.js","webpack:///./src/img/index.js","webpack:///external {\"commonjs\":\"blue-queue-pipe\",\"commonjs2\":\"blue-queue-pipe\",\"root\":\"BlueQueuePipe\"}","webpack:///./src/arc/index.js","webpack:///./src/text/index.js","webpack:///./src/device/index.js"],"names":["root","factory","exports","module","require","define","amd","self","this","__WEBPACK_EXTERNAL_MODULE_0__","__WEBPACK_EXTERNAL_MODULE_8__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","options","el","canvas","document","querySelector","canvasCtx","getContext","width","height","_this","defaultCanvasProperties","utils","each","canvasProperties","key","__WEBPACK_IMPORTED_MODULE_0_blue_utils__","__WEBPACK_IMPORTED_MODULE_0_blue_utils___default","__WEBPACK_IMPORTED_MODULE_1__canvas_properties__","renderList","forEach","item","type","img","image","hook","created","drawImage","x","y","rendered","renderText","isFunction","resetCanvasProperties","text","font","fillStyle","style","fillText","content","value","__WEBPACK_IMPORTED_MODULE_0__instance__","BlueCanvasTmpl","opts","arguments","length","undefined","_classCallCheck","init","clearRect","arc","apply","getByteLength","__WEBPACK_IMPORTED_MODULE_0__canvas__","__WEBPACK_IMPORTED_MODULE_1_blue_utils__","__WEBPACK_IMPORTED_MODULE_1_blue_utils___default","__WEBPACK_IMPORTED_MODULE_2__img__","loadQueue","id","_initCanvas$call","initCanvas","saveCanvasDefaultProperties","load","console","warn","blueCanvasTmpl","BlueQueuePipe","methods","next","isEmpty","render","dequeue","imgs","src","enqueue","Image","onload","parseInt","useMethod","onerror","log","push","__WEBPACK_IMPORTED_MODULE_1_blue_queue_pipe__","__WEBPACK_IMPORTED_MODULE_1_blue_queue_pipe___default","__WEBPACK_IMPORTED_MODULE_2__render__","radius","color","ctx","beginPath","lineWidth","moveTo","lineTo","arcTo","closePath","last","len","char","charAt","match","device","isWap","val","substr","lastVal","__WEBPACK_IMPORTED_MODULE_0__device__","isWeChat","isIPhone","isIPad","isAndroid","isApp","isPc","isServer","userAgent","navigator","test","e"],"mappings":"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","file":"js/blue-canvas-tmpl.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"blue-utils\"), require(\"blue-queue-pipe\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([, ], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"BlueCanvasTmpl\"] = factory(require(\"blue-utils\"), require(\"blue-queue-pipe\"));\n\telse\n\t\troot[\"BlueCanvasTmpl\"] = factory(root[\"blueUtils\"], root[\"BlueQueuePipe\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_8__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./static\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 28032c77bd08d1f6cb95","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"blue-utils\",\"commonjs2\":\"blue-utils\",\"root\":\"blueUtils\"}\n// module id = 0\n// module chunks = 0 1","import utils from 'blue-utils';\r\nimport canvasProperties from './canvas-properties';\r\n\r\nexport function initCanvas() {\r\n  const options = this.options;\r\n  if (!options.el) return {};\r\n  const canvas = document.querySelector(options.el);\r\n  if (!canvas) return {};\r\n  const canvasCtx = canvas.getContext('2d');\r\n  canvas.width = options.width;\r\n  canvas.height = options.height;\r\n  return {\r\n    canvasCtx,\r\n    canvas\r\n  };\r\n}\r\n\r\n//save canvas default attributes\r\nexport function saveCanvasDefaultProperties() {\r\n  if (!this.canvas.defaultCanvasProperties) {\r\n    this.canvas.defaultCanvasProperties = {};\r\n    utils.each(canvasProperties, (key) => {\r\n      this.canvas.defaultCanvasProperties[key] = this.canvasCtx[key];\r\n    });\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/canvas/index.js","import utils from 'blue-utils';\r\n\r\n//渲染\r\nexport default function render() {\r\n  const options = this.options;\r\n  const renderList = options.renderList;\r\n  (renderList || []).forEach((item) => {\r\n    if (item.type === 'img') {\r\n      renderImg.call(this, item);\r\n    } else if (item.type === 'text') {\r\n      renderText.call(this, item);\r\n    } else if (utils.isFunction(item)) {\r\n      utils.hook(this, item);\r\n    }\r\n    this.resetCanvasProperties();\r\n  });\r\n  utils.hook(this, options.rendered);\r\n}\r\n\r\n//渲染图片\r\nfunction renderImg(img) {\r\n  //插入图片\r\n  if (img.image) {\r\n    utils.hook(this, img.created, [img]);\r\n    this.canvasCtx.drawImage(img.image, img.x, img.y, img.width, img.height);\r\n    utils.hook(this, img.rendered, [img]);\r\n  }\r\n}\r\n\r\n//渲染文字\r\nexport function renderText(text) {\r\n  utils.hook(this, text.created, [text]);\r\n  const canvasCtx = this.canvasCtx;\r\n  canvasCtx.font = text.font || '15px arial, 微软雅黑, sans-serif';\r\n  canvasCtx.fillStyle = text.style || '#000';\r\n  canvasCtx.fillText(text.content, text.x, text.y);\r\n  utils.hook(this, text.rendered, [text]);\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/index.js","import BlueCanvasTmpl from './instance';\r\n\r\nexport default BlueCanvasTmpl;\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import init from './init';\r\nimport { renderText } from '../render';\r\nimport { arc } from '../arc';\r\nimport { getByteLength } from '../text';\r\nimport utils from 'blue-utils';\r\n\r\nclass BlueCanvasTmpl {\r\n  constructor(opts = {\r\n    //创建后的钩子\r\n    created() {\r\n    },\r\n    renderList: [],\r\n    //渲染完毕后的钩子\r\n    rendered() {\r\n    }\r\n  }) {\r\n    this.options = opts;\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    init.call(this);\r\n  }\r\n\r\n  renderText(text) {\r\n    renderText.call(this, text);\r\n  }\r\n\r\n  //初始化canvas context的属性\r\n  resetCanvasProperties() {\r\n    utils.each(this.canvas.defaultCanvasProperties, (value, key) => {\r\n      this.canvasCtx[key] = value;\r\n    });\r\n  }\r\n\r\n  //更新\r\n  update(options) {\r\n    if (options) {\r\n      this.options = options;\r\n    }\r\n    this.canvasCtx.clearRect(0, 0, this.options.width, this.options.height);\r\n    this.init();\r\n  }\r\n\r\n  arc() {\r\n    arc.apply(this, arguments);\r\n  }\r\n\r\n  getByteLength() {\r\n    return getByteLength.apply(this, arguments);\r\n  }\r\n\r\n  static getByteLength() {\r\n    return getByteLength.apply(this, arguments);\r\n  }\r\n\r\n}\r\n\r\nexport default BlueCanvasTmpl;\n\n\n// WEBPACK FOOTER //\n// ./src/instance/index.js","import { initCanvas } from \"../canvas\";\r\nimport utils from 'blue-utils';\r\nimport { load } from '../img';\r\nimport { saveCanvasDefaultProperties } from '../canvas';\r\n\r\nfunction init() {\r\n  //预加载队列\r\n  this.loadQueue = [];\r\n  this.id = 0;\r\n  const { canvas, canvasCtx } = initCanvas.call(this);\r\n  if (!canvas) {\r\n    console.warn(`element is null`);\r\n    return;\r\n  }\r\n  this.canvasCtx = canvasCtx;\r\n  this.canvas = canvas;\r\n  saveCanvasDefaultProperties.call(this);\r\n  //创建完毕的钩子\r\n  utils.hook(this, this.options.created);\r\n  //预加载\r\n  load.call(this);\r\n}\r\n\r\nexport default init;\n\n\n// WEBPACK FOOTER //\n// ./src/instance/init.js","//default canvas config\r\nconst canvasProperties = [\r\n  \"fillStyle\",\r\n  \"filter\",\r\n  \"font\",\r\n  \"globalAlpha\",\r\n  \"globalCompositeOperation\",\r\n  \"imageSmoothingEnabled\",\r\n  \"imageSmoothingQuality\",\r\n  \"lineCap\",\r\n  \"lineDashOffset\",\r\n  \"lineJoin\",\r\n  \"lineWidth\",\r\n  \"miterLimit\",\r\n  \"shadowBlur\",\r\n  \"shadowColor\",\r\n  \"shadowOffsetX\",\r\n  \"shadowOffsetY\",\r\n  \"strokeStyle\",\r\n  \"textAlign\",\r\n  \"textBaseline\"\r\n];\r\n\r\nexport default canvasProperties;\n\n\n// WEBPACK FOOTER //\n// ./src/canvas/canvas-properties.js","import utils from 'blue-utils';\r\nimport BlueQueuePipe from 'blue-queue-pipe';\r\nimport render from '../render';\r\n\r\n//预加载\r\nexport function load() {\r\n  const blueCanvasTmpl = this;\r\n  this.id++;\r\n  //设置预加载的队列\r\n  this.loadQueue = new BlueQueuePipe({\r\n    methods: {\r\n      next() {\r\n        if (!this.isEmpty()) {\r\n          utils.hook(this, this.dequeue());\r\n        } else {\r\n          //没有就进行渲染\r\n          render.call(blueCanvasTmpl);\r\n        }\r\n      }\r\n    }\r\n  });\r\n  //查找渲染中为图片，预加载图片\r\n  loadImgs.call(this, findImgs.call(this));\r\n}\r\n\r\n//查找图片\r\nfunction findImgs() {\r\n  const { renderList } = this.options;\r\n  const imgs = [];\r\n  utils.each(renderList, (item) => {\r\n    if (item.type === 'img') {\r\n      imgs.push(item);\r\n    }\r\n  });\r\n  return imgs;\r\n}\r\n\r\n//预加载图片\r\nfunction loadImgs(imgs) {\r\n  const id = this.id;\r\n  (imgs || []).forEach((img) => {\r\n    if (!img.src) return;\r\n    this.loadQueue.enqueue(() => {\r\n      const image = new Image();\r\n      image.id = this.id;\r\n      image.onload = () => {\r\n        //限定执行的id\r\n        if (parseInt(image.id) === id) {\r\n          img.image = image;\r\n          //队列下一跳\r\n          this.loadQueue.useMethod('next');\r\n        }\r\n      };\r\n\r\n      image.onerror = () => {\r\n        //队列下一跳\r\n        console.log(`load error:${image.src}`);\r\n        this.loadQueue.useMethod('next');\r\n      };\r\n\r\n      image.src = img.src;\r\n\r\n    });\r\n  });\r\n  this.loadQueue.useMethod('next');\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/img/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"blue-queue-pipe\",\"commonjs2\":\"blue-queue-pipe\",\"root\":\"BlueQueuePipe\"}\n// module id = 8\n// module chunks = 0 1","export function arc(type, x, y, width, height, radius, color) {\r\n  const ctx = this.canvasCtx;\r\n  ctx.beginPath();\r\n  ctx.lineWidth = 1;\r\n  ctx[type + 'Style'] = color;\r\n  ctx.moveTo(x, y);\r\n  ctx.lineTo(x + width, y);\r\n  ctx.arcTo(x + width + radius, y, x + width + radius, y + radius, radius);\r\n  ctx.lineTo(x + width + radius, y + height);\r\n  ctx.arcTo(x + width + radius, y + height + radius, x + width, y + radius + height, radius);\r\n  ctx.lineTo(x, y + height + radius);\r\n  ctx.arcTo(x - radius, y + height + radius, x - radius, y + height, radius);\r\n  ctx.lineTo(x - radius, y + radius);\r\n  ctx.arcTo(x - radius, y, x, y, radius);\r\n  ctx.closePath();\r\n  ctx[type]();\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/arc/index.js","import device from '../device';\r\n\r\nexport function getByteLength(content, length, last) {\r\n  let len = 0;\r\n  for (let i = 0; i < content.length; i++) {\r\n    let char = content.charAt(i);\r\n    if (\r\n      char.match(/[\\u4E00-\\u9FBF]/ig) != null ||\r\n      char.match(/[\\u2014\\u300a\\u300b]/g) ||\r\n      (char.match(/[\\uff0c\\u3002\\u201c\\uff1a\\u201d\\u2014]/ig) != null && !device.isWap) ||\r\n      (char.match(/[\\uff0c\\u3002\\uff1a]/ig) != null && device.isWap)\r\n    ) {\r\n      len += 2;\r\n    } else {\r\n      len += 1;\r\n    }\r\n    //满足截取的字符长度\r\n    //截取的字符等于已经抓到的len，\r\n    if (length !== undefined && (length === len || length < len)) {\r\n      return {\r\n        val: content.substr(0, i + 1),\r\n        lastVal: content.substr(i + 1)\r\n      };\r\n    }\r\n  }\r\n  if (length !== undefined && last === true) {\r\n    return {\r\n      val: content.substr(0),\r\n      lastVal: ''\r\n    };\r\n  }\r\n  return len;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/text/index.js","//获取当前设备信息\r\nexport default function device() {\r\n  //默认\r\n  let device = {\r\n    isWeChat: false,  //是否在微信端\r\n    isWap: false,     //是否为移动设备\r\n    isIPhone: false,\r\n    isIPad: false,\r\n    isAndroid: false,\r\n    isApp: false,     //是否在app webview\r\n    isPc: false,      //是否为电脑端\r\n    isServer: true    //是否在服务器端 预留ssr处理\r\n  };\r\n\r\n  try {\r\n    const userAgent = navigator.userAgent;\r\n    const isWap = /iPhone|iPad|Android|Windows Phone|KFAPWI|MeeGo/ig.test(userAgent);\r\n    const isWeChat = /MicroMessenger/ig.test(userAgent);\r\n    device = {\r\n      isWeChat,\r\n      isWap,\r\n      isIPhone: /iPhone/ig.test(userAgent),\r\n      isIPad: /iPad/ig.test(userAgent),\r\n      isAndroid: /Android/ig.test(userAgent),\r\n      isApp: false,\r\n      isPc: !isWap,\r\n      isServer: false\r\n    };\r\n  } catch (e) {\r\n\r\n  }\r\n\r\n  return device;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/device/index.js"],"sourceRoot":""}