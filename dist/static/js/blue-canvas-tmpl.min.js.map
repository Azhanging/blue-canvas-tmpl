{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 928e89e3ab0b91b9a530","webpack:///external {\"commonjs\":\"blue-utils\",\"commonjs2\":\"blue-utils\",\"root\":\"blueUtils\"}","webpack:///./src/canvas/index.js","webpack:///./src/render/index.js","webpack:///./src/index.js","webpack:///./src/instance/index.js","webpack:///./src/instance/init.js","webpack:///./src/canvas/canvas-properties.js","webpack:///./src/img/index.js","webpack:///external {\"commonjs\":\"blue-queue-pipe\",\"commonjs2\":\"blue-queue-pipe\",\"root\":\"BlueQueuePipe\"}","webpack:///./src/arc/index.js","webpack:///./src/text/index.js","webpack:///./src/device/index.js"],"names":["root","factory","exports","module","require","define","amd","self","this","__WEBPACK_EXTERNAL_MODULE_0__","__WEBPACK_EXTERNAL_MODULE_8__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","options","el","canvas","document","querySelector","canvasCtx","getContext","width","height","defaultCanvasProperties","utils","each","canvasProperties","key","__WEBPACK_IMPORTED_MODULE_0_blue_utils__","__WEBPACK_IMPORTED_MODULE_0_blue_utils___default","__WEBPACK_IMPORTED_MODULE_1__canvas_properties__","renderList","forEach","item","type","img","image","hook","created","drawImage","x","y","rendered","renderText","isFunction","resetCanvasProperties","text","font","fillStyle","style","fillText","content","value","__WEBPACK_IMPORTED_MODULE_0__instance__","BlueCanvasTmpl","__WEBPACK_IMPORTED_MODULE_0__init__","__WEBPACK_IMPORTED_MODULE_1__render__","__WEBPACK_IMPORTED_MODULE_2__arc__","__WEBPACK_IMPORTED_MODULE_3__text__","__WEBPACK_IMPORTED_MODULE_4_blue_utils__","__WEBPACK_IMPORTED_MODULE_4_blue_utils___default","constructor","opts","init","update","clearRect","arc","apply","arguments","getByteLength","[object Object]","__WEBPACK_IMPORTED_MODULE_0__canvas__","__WEBPACK_IMPORTED_MODULE_1_blue_utils__","__WEBPACK_IMPORTED_MODULE_1_blue_utils___default","__WEBPACK_IMPORTED_MODULE_2__img__","loadQueue","id","initCanvas","saveCanvasDefaultProperties","load","console","warn","blueCanvasTmpl","BlueQueuePipe","methods","next","isEmpty","log","render","dequeue","imgs","src","enqueue","Image","onload","parseInt","useMethod","onerror","push","__WEBPACK_IMPORTED_MODULE_1_blue_queue_pipe__","__WEBPACK_IMPORTED_MODULE_1_blue_queue_pipe___default","__WEBPACK_IMPORTED_MODULE_2__render__","radius","color","ctx","beginPath","lineWidth","moveTo","lineTo","arcTo","closePath","length","last","len","char","charAt","match","device","isWap","undefined","val","substr","lastVal","__WEBPACK_IMPORTED_MODULE_0__device__","isWeChat","isIPhone","isIPad","isAndroid","isApp","isPc","isServer","userAgent","navigator","test","e"],"mappings":"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","file":"js/blue-canvas-tmpl.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"blue-utils\"), require(\"blue-queue-pipe\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([, ], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"BlueCanvasTmpl\"] = factory(require(\"blue-utils\"), require(\"blue-queue-pipe\"));\n\telse\n\t\troot[\"BlueCanvasTmpl\"] = factory(root[\"blueUtils\"], root[\"BlueQueuePipe\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_8__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./static\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 928e89e3ab0b91b9a530","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"blue-utils\",\"commonjs2\":\"blue-utils\",\"root\":\"blueUtils\"}\n// module id = 0\n// module chunks = 0 1","import utils from 'blue-utils';\r\nimport canvasProperties from './canvas-properties';\r\n\r\nexport function initCanvas() {\r\n  const options = this.options;\r\n  if (!options.el) return {};\r\n  const canvas = document.querySelector(options.el);\r\n  if (!canvas) return {};\r\n  const canvasCtx = canvas.getContext('2d');\r\n  canvas.width = options.width;\r\n  canvas.height = options.height;\r\n  return {\r\n    canvasCtx,\r\n    canvas\r\n  };\r\n}\r\n\r\n//save canvas default attributes\r\nexport function saveCanvasDefaultProperties() {\r\n  if (!this.canvas.defaultCanvasProperties) {\r\n    this.canvas.defaultCanvasProperties = {};\r\n    utils.each(canvasProperties, (key) => {\r\n      this.canvas.defaultCanvasProperties[key] = this.canvasCtx[key];\r\n    });\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/canvas/index.js","import utils from 'blue-utils';\r\n\r\n//渲染\r\nexport default function render() {\r\n  const renderList = this.options.renderList;\r\n  (renderList || []).forEach((item) => {\r\n    if (item.type === 'img') {\r\n      renderImg.call(this, item);\r\n    } else if (item.type === 'text') {\r\n      renderText.call(this, item);\r\n    } else if (utils.isFunction(item)) {\r\n      utils.hook(this, item);\r\n    }\r\n    this.resetCanvasProperties();\r\n  });\r\n}\r\n\r\n//渲染图片\r\nfunction renderImg(img) {\r\n  //插入图片\r\n  if (img.image) {\r\n    utils.hook(this, img.created, [img]);\r\n    this.canvasCtx.drawImage(img.image, img.x, img.y, img.width, img.height);\r\n    utils.hook(this, img.rendered, [img]);\r\n  }\r\n}\r\n\r\n//渲染文字\r\nexport function renderText(text) {\r\n  utils.hook(this, text.created, [text]);\r\n  const canvasCtx = this.canvasCtx;\r\n  canvasCtx.font = text.font || '15px arial, 微软雅黑, sans-serif';\r\n  canvasCtx.fillStyle = text.style || '#000';\r\n  canvasCtx.fillText(text.content, text.x, text.y);\r\n  utils.hook(this, text.rendered, [text]);\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/index.js","import BlueCanvasTmpl from './instance';\r\n\r\nexport default BlueCanvasTmpl;\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import init from './init';\r\nimport { renderText } from '../render';\r\nimport { arc } from '../arc';\r\nimport { getByteLength } from '../text';\r\nimport utils from 'blue-utils';\r\n\r\nclass BlueCanvasTmpl {\r\n  constructor(opts = {\r\n    //创建后的钩子\r\n    created() {\r\n    },\r\n    renderList: [],\r\n    //渲染完毕后的钩子\r\n    rendered() {\r\n    }\r\n  }) {\r\n    this.options = opts;\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    init.call(this);\r\n  }\r\n\r\n  renderText(text) {\r\n    renderText.call(this, text);\r\n  }\r\n\r\n  //初始化canvas context的属性\r\n  resetCanvasProperties() {\r\n    utils.each(this.canvas.defaultCanvasProperties, (value, key) => {\r\n      this.canvasCtx[key] = value;\r\n    });\r\n  }\r\n\r\n  //更新\r\n  update(options) {\r\n    if (options) {\r\n      this.options = options;\r\n    }\r\n    this.canvasCtx.clearRect(0, 0, this.options.width, this.options.height);\r\n    this.init();\r\n  }\r\n\r\n  arc() {\r\n    arc.apply(this, arguments);\r\n  }\r\n\r\n  getByteLength() {\r\n    return getByteLength.apply(this, arguments);\r\n  }\r\n\r\n  static getByteLength() {\r\n    return getByteLength.apply(this, arguments);\r\n  }\r\n\r\n}\r\n\r\nexport default BlueCanvasTmpl;\n\n\n// WEBPACK FOOTER //\n// ./src/instance/index.js","import { initCanvas } from \"../canvas\";\r\nimport utils from 'blue-utils';\r\nimport { load } from '../img';\r\nimport { saveCanvasDefaultProperties } from '../canvas';\r\n\r\nfunction init(opts) {\r\n  //预加载队列\r\n  this.loadQueue = [];\r\n  this.id = 0;\r\n  const { canvas, canvasCtx } = initCanvas.call(this);\r\n  if (!canvas) {\r\n    console.warn(`element is null`);\r\n    return;\r\n  }\r\n  this.canvasCtx = canvasCtx;\r\n  this.canvas = canvas;\r\n  saveCanvasDefaultProperties.call(this);\r\n  //创建完毕的钩子\r\n  utils.hook(this, this.options.created);\r\n  //预加载\r\n  load.call(this);\r\n}\r\n\r\nexport default init;\n\n\n// WEBPACK FOOTER //\n// ./src/instance/init.js","//default canvas config\r\nconst canvasProperties = [\r\n  \"fillStyle\",\r\n  \"filter\",\r\n  \"font\",\r\n  \"globalAlpha\",\r\n  \"globalCompositeOperation\",\r\n  \"imageSmoothingEnabled\",\r\n  \"imageSmoothingQuality\",\r\n  \"lineCap\",\r\n  \"lineDashOffset\",\r\n  \"lineJoin\",\r\n  \"lineWidth\",\r\n  \"miterLimit\",\r\n  \"shadowBlur\",\r\n  \"shadowColor\",\r\n  \"shadowOffsetX\",\r\n  \"shadowOffsetY\",\r\n  \"strokeStyle\",\r\n  \"textAlign\",\r\n  \"textBaseline\"\r\n];\r\n\r\nexport default canvasProperties;\n\n\n// WEBPACK FOOTER //\n// ./src/canvas/canvas-properties.js","import utils from 'blue-utils';\r\nimport BlueQueuePipe from 'blue-queue-pipe';\r\nimport render from '../render';\r\n\r\n//预加载\r\nexport function load() {\r\n  const blueCanvasTmpl = this;\r\n  this.id++;\r\n  //设置预加载的队列\r\n  this.loadQueue = new BlueQueuePipe({\r\n    methods: {\r\n      next() {\r\n        if (!this.isEmpty()) {\r\n          utils.hook(this, this.dequeue());\r\n        } else {\r\n          console.log('render');\r\n          //没有就进行渲染\r\n          render.call(blueCanvasTmpl);\r\n        }\r\n      }\r\n    }\r\n  });\r\n  //查找渲染中为图片，预加载图片\r\n  loadImgs.call(this, findImgs.call(this));\r\n}\r\n\r\n//查找图片\r\nfunction findImgs() {\r\n  const { renderList } = this.options;\r\n  const imgs = [];\r\n  utils.each(renderList, (item) => {\r\n    if (item.type === 'img') {\r\n      imgs.push(item);\r\n    }\r\n  });\r\n  return imgs;\r\n}\r\n\r\n//预加载图片\r\nfunction loadImgs(imgs) {\r\n  const id = this.id;\r\n  (imgs || []).forEach((img) => {\r\n    if (!img.src) return;\r\n    this.loadQueue.enqueue(() => {\r\n      const image = new Image();\r\n      image.id = this.id;\r\n      image.onload = () => {\r\n        //限定执行的id\r\n        if (parseInt(image.id) === id) {\r\n          img.image = image;\r\n          //队列下一跳\r\n          console.log('success');\r\n          this.loadQueue.useMethod('next');\r\n        }\r\n      };\r\n\r\n      image.onerror = () => {\r\n        //队列下一跳\r\n        console.log('error');\r\n        this.loadQueue.useMethod('next');\r\n      };\r\n\r\n      image.src = img.src;\r\n\r\n    });\r\n  });\r\n  console.log('next');\r\n  this.loadQueue.useMethod('next');\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/img/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"blue-queue-pipe\",\"commonjs2\":\"blue-queue-pipe\",\"root\":\"BlueQueuePipe\"}\n// module id = 8\n// module chunks = 0 1","export function arc(type, x, y, width, height, radius, color) {\r\n  const ctx = this.canvasCtx;\r\n  ctx.beginPath();\r\n  ctx.lineWidth = 1;\r\n  ctx[type + 'Style'] = color;\r\n  ctx.moveTo(x, y);\r\n  ctx.lineTo(x + width, y);\r\n  ctx.arcTo(x + width + radius, y, x + width + radius, y + radius, radius);\r\n  ctx.lineTo(x + width + radius, y + height);\r\n  ctx.arcTo(x + width + radius, y + height + radius, x + width, y + radius + height, radius);\r\n  ctx.lineTo(x, y + height + radius);\r\n  ctx.arcTo(x - radius, y + height + radius, x - radius, y + height, radius);\r\n  ctx.lineTo(x - radius, y + radius);\r\n  ctx.arcTo(x - radius, y, x, y, radius);\r\n  ctx.closePath();\r\n  ctx[type]();\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/arc/index.js","import device from '../device';\r\n\r\nexport function getByteLength(content, length, last) {\r\n  let len = 0;\r\n  for (let i = 0; i < content.length; i++) {\r\n    let char = content.charAt(i);\r\n    if (\r\n      char.match(/[\\u4E00-\\u9FBF]/ig) != null ||\r\n      char.match(/[\\u2014\\u300a\\u300b]/g) ||\r\n      (char.match(/[\\uff0c\\u3002\\u201c\\uff1a\\u201d\\u2014]/ig) != null && !device.isWap) ||\r\n      (char.match(/[\\uff0c\\u3002\\uff1a]/ig) != null && device.isWap)\r\n    ) {\r\n      len += 2;\r\n    } else {\r\n      len += 1;\r\n    }\r\n    //满足截取的字符长度\r\n    //截取的字符等于已经抓到的len，\r\n    if (length !== undefined && (length === len || length < len)) {\r\n      return {\r\n        val: content.substr(0, i + 1),\r\n        lastVal: content.substr(i + 1)\r\n      };\r\n    }\r\n  }\r\n  if (length !== undefined && last === true) {\r\n    return {\r\n      val: content.substr(0),\r\n      lastVal: ''\r\n    };\r\n  }\r\n  return len;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/text/index.js","//获取当前设备信息\r\nexport default function device() {\r\n  //默认\r\n  let device = {\r\n    isWeChat: false,  //是否在微信端\r\n    isWap: false,     //是否为移动设备\r\n    isIPhone: false,\r\n    isIPad: false,\r\n    isAndroid: false,\r\n    isApp: false,     //是否在app webview\r\n    isPc: false,      //是否为电脑端\r\n    isServer: true    //是否在服务器端 预留ssr处理\r\n  };\r\n\r\n  try {\r\n    const userAgent = navigator.userAgent;\r\n    const isWap = /iPhone|iPad|Android|Windows Phone|KFAPWI|MeeGo/ig.test(userAgent);\r\n    const isWeChat = /MicroMessenger/ig.test(userAgent);\r\n    device = {\r\n      isWeChat,\r\n      isWap,\r\n      isIPhone: /iPhone/ig.test(userAgent),\r\n      isIPad: /iPad/ig.test(userAgent),\r\n      isAndroid: /Android/ig.test(userAgent),\r\n      isApp: false,\r\n      isPc: !isWap,\r\n      isServer: false\r\n    };\r\n  } catch (e) {\r\n\r\n  }\r\n\r\n  return device;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/device/index.js"],"sourceRoot":""}